import{A as f,B as g,D as C,Ea as k,Fa as V,Ga as $,O as s,Qa as H,X as q,Y as W,a as b,aa as S,b as h,e as I,ea as N,fa as y,g as O,h as M,ia as o,j as R,ja as n,k as j,l as v,la as F,ma as U,na as w,r as p,ra as r,sa as _,t as x,ta as d,v as P,w as T,y as A}from"./chunk-NE5MIBBG.js";var z="https://swapi.dev/api/people";function L(){let i=p(H);return t=>i.get(`${z}/${t}`).pipe(M(e=>h(b({},e),{id:t})),R(e=>(console.error(e),O(void 0))))}function E(i,t){!t?.injector&&x(E);let e=t?.injector??p(A),a=new I(1),c=$(()=>{let l;try{l=i()}catch(m){k(()=>a.error(m));return}k(()=>a.next(l))},{injector:e,manualCleanup:!0});return e.get(f).onDestroy(()=>{c.destroy(),a.complete()}),a.asObservable()}function D(i,t){let e=!t?.manualCleanup;e&&!t?.injector&&x(D);let a=e?t?.injector?.get(f)??p(f):null,c=G(t?.equal),l;t?.requireSync?l=C({kind:0},{equal:c}):l=C({kind:1,value:t?.initialValue},{equal:c});let m=i.subscribe({next:u=>l.set({kind:1,value:u}),error:u=>{l.set({kind:2,error:u})}});if(t?.requireSync&&l().kind===0)throw new v(601,!1);return a?.onDestroy(m.unsubscribe.bind(m)),V(()=>{let u=l();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new v(601,!1)}},{equal:t?.equal})}function G(i=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&i(t.value,e.value)}function Y(i,t){i&1&&(o(0,"p"),r(1,"A Sith, he is evil."),n())}function J(i,t){if(i&1){let e=F();o(0,"p")(1,"span"),r(2,"Id:"),n(),r(3),n(),S(4,Y,2,0,"p"),o(5,"p")(6,"span"),r(7,"Name: "),n(),r(8),n(),o(9,"p")(10,"span"),r(11,"Height: "),n(),r(12),n(),o(13,"p")(14,"span"),r(15,"Mass:"),n(),r(16),n(),o(17,"p")(18,"span"),r(19,"Hair Color:"),n(),r(20),n(),o(21,"p")(22,"span"),r(23,"Skin Color:"),n(),r(24),n(),o(25,"p")(26,"span"),r(27,"Eye Color:"),n(),r(28),n(),o(29,"p")(30,"span"),r(31,"Gender:"),n(),r(32),n(),o(33,"button",1),U("click",function(){P(e);let c=w();return T(c.voted())}),r(34),n()}if(i&2){let e=t,a=w();s(3),d(" ",e.id," "),s(),y(a.isSith()?4:-1),s(4),_(e.name),s(4),_(e.height),s(4),d(" ",e.mass),s(4),d(" ",e.hair_color),s(4),d(" ",e.skin_color),s(4),d(" ",e.eye_color),s(4),d(" ",e.gender),s(2),d("Voted for ",e.name)}}function K(i,t){i&1&&(o(0,"p"),r(1,"No info"),n())}var B=class i{id=g(1);isSith=g(!1);lastClicked=q("");voted(){let t=this.person()?.name||"NA",e=new Date(Date.now()).toISOString();this.lastClicked.set(`You voted for ${t} at ${e}`)}getPersonFn=L();person=D(E(this.id).pipe(j(t=>this.getPersonFn(t))));static \u0275fac=function(e){return new(e||i)};static \u0275cmp=W({type:i,selectors:[["app-star-wars-character"]],hostVars:2,hostBindings:function(e,a){e&2&&N("rebeccapurple")},inputs:{id:[1,"id"],isSith:[1,"isSith"],lastClicked:[1,"lastClicked"]},outputs:{lastClicked:"lastClickedChange"},decls:3,vars:1,consts:[[1,"border"],[3,"click"]],template:function(e,a){if(e&1&&(o(0,"div",0),S(1,J,35,10)(2,K,2,0,"p"),n()),e&2){let c;s(),y((c=a.person())?1:2,c)}},styles:["[_nghost-%COMP%]{display:block;font-size:1rem;padding:1rem}.border[_ngcontent-%COMP%]{border:1px solid black;border-radius:.5rem;padding:1rem;margin-bottom:1rem}"],changeDetection:0})};export{B as AppStarWarCharacterComponent};
